<h2>SMART HOME</h2>

<button onclick="sendDoor()">ðŸšª Open Door</button>
<button onclick="sendLight('on')">ðŸ’¡ Light ON</button>
<button onclick="sendLight('off')">ðŸ’¡ Light OFF</button>

<h3>Logs</h3>
<ul id="logs"></ul>

<script>
async function sendLight(state){
    await fetch("/light", {
        method: "POST",
        headers: {"Content-Type": "application/x-www-form-urlencoded"},
        body: "state=" + state
    });
}

async function sendDoor(){
    await fetch("/door", {method: "POST"});
}

async function loadLogs(){
    let r = await fetch("/logs");
    let data = await r.json();
    let ul = document.getElementById("logs");
    ul.innerHTML="";
    data.forEach(l=>{
        ul.innerHTML += `<li>${l.user} - ${l.action} - ${l.time}</li>`;
    });
}

setInterval(loadLogs,2000);
</script>
