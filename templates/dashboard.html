<h2>Xin chÃ o {{user}} ({{role}})</h2>

<button onclick="door()">ðŸšª Open Door</button>
<button onclick="light('ON')">ðŸ’¡ ON</button>
<button onclick="light('OFF')">ðŸ’¡ OFF</button>

<h3 id="state">Device: --</h3>

<script>
async function door(){
  await fetch("/door",{method:"POST"})
}
async function light(s){
  await fetch("/light",{
    method:"POST",
    headers:{"Content-Type":"application/x-www-form-urlencoded"},
    body:"state="+s
  })
}
async function update(){
  let r=await fetch("/status")
  let d=await r.json()
  document.getElementById("state").innerText="Device: "+d.result
}
setInterval(update,1000)
</script>

{% if role=="admin" %}
<a href="/users">ðŸ‘¤ Manage Users</a>
{% endif %}
<a href="/logs">ðŸ“œ Logs</a>
<a href="/logout">ðŸšª Logout</a>
