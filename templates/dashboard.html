<!DOCTYPE html>
<html>
<head>
    <title>Smart Home</title>
</head>
<body>
<h2>SMART HOME</h2>

<button onclick="fetch('/door', {method:'POST'})">Open Door</button>

<button onclick="fetch('/light', {
    method:'POST',
    headers:{'Content-Type':'application/x-www-form-urlencoded'},
    body:'state=ON'
})">Light ON</button>

<button onclick="fetch('/light', {
    method:'POST',
    headers:{'Content-Type':'application/x-www-form-urlencoded'},
    body:'state=OFF'
})">Light OFF</button>

<h3>Logs</h3>
<ul id="logs"></ul>

<script>
function loadLogs(){
    fetch('/logs')
    .then(res=>res.json())
    .then(data=>{
        let ul=document.getElementById("logs")
        ul.innerHTML=""
        data.forEach(l=>{
            ul.innerHTML+=`<li>${l.time} - ${l.user} - ${l.action}</li>`
        })
    })
}
setInterval(loadLogs,2000)
</script>

</body>
</html>
